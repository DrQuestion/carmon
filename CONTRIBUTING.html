<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Contributing to carmon • carmon</title><!-- favicons --><link rel="icon" type="image/png" sizes="48x48" href="favicon-48x48.png"><link rel="icon" type="”image/svg+xml”" href="favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png"><link rel="icon" sizes="any" href="favicon.ico"><link rel="manifest" href="site.webmanifest"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css"><script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet"><script src="pkgdown.js"></script><link href="extra.css" rel="stylesheet"><meta property="og:title" content="Contributing to carmon"><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-title-body">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">carmon</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.99.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="articles/carmon.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/DrQuestion/carmon/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="contents col-md-9">
    <div class="page-header">
      <h1>Contributing to carmon</h1>
    </div>

<div id="contributing-to-carmon" class="section level1">

<p>This outlines how to propose a change to carmon. For a detailed discussion on contributing to this and other tidyverse packages, please see the <a href="https://rstd.io/tidy-contrib" class="external-link">development contributing guide</a> and our <a href="https://code-review.tidyverse.org/" class="external-link">code review principles</a>.</p>
<div class="section level2">
<h2 id="fixing-typos">Fixing typos<a class="anchor" aria-label="anchor" href="#fixing-typos"></a></h2>
<p>You can fix typos, spelling mistakes, or grammatical errors in the documentation directly using the GitHub web interface, as long as the changes are made in the <em>source</em> file. This generally means you’ll need to edit <a href="https://roxygen2.r-lib.org/articles/roxygen2.html" class="external-link">roxygen2 comments</a> in an <code>.R</code>, not a <code>.Rd</code> file. You can find the <code>.R</code> file that generates the <code>.Rd</code> by reading the comment in the first line.</p>
</div>
<div class="section level2">
<h2 id="bigger-changes">Bigger changes<a class="anchor" aria-label="anchor" href="#bigger-changes"></a></h2>
<p>If you want to make a bigger change, it’s a good idea to first file an issue and make sure someone from the team agrees that it’s needed. If you’ve found a bug, please file an issue that illustrates the bug with a minimal <a href="https://www.tidyverse.org/help/#reprex" class="external-link">reprex</a> (this will also help you write a unit test, if needed). See our guide on <a href="https://code-review.tidyverse.org/issues/" class="external-link">how to create a great issue</a> for more advice.</p>
<div class="section level3">
<h3 id="adding-new-omics-types-and-marginal-distributions">Adding new omics types and marginal distributions<a class="anchor" aria-label="anchor" href="#adding-new-omics-types-and-marginal-distributions"></a></h3>
<p>The carmon package is built to grow. We primarily plan in the future to expand the range of omics types carmon is tailored for. We also plan to expand the range of marginal probability distributions available. If you want to contribute to this growth, please respect the inner function structure and environment of the package. We describe main guidelines below for a few different scenarios. Please, respect what is explained below, at the same time complying with the remaining rules for contribution. In any case, feel free to issue a feature request on the GitHub page of the package if you believe we should add support for new omics types or marginals.</p>
<div class="section level4">
<h4 id="new-omics-type-marginal-distribution-already-implemented">New omics type, marginal distribution already implemented<a class="anchor" aria-label="anchor" href="#new-omics-type-marginal-distribution-already-implemented"></a></h4>
<p>If the marginal distribution you would want to assign as a default to your new omics type is already available (check which ones are with <code><a href="reference/which_marginals.html">which_marginals()</a></code>), these are the passages to follow to include a new omics type:</p>
<ul><li><p>Add the omics type and a series of synonyms you believe appropriate to the function <code>omics2marginal()</code> in the <code>R/copulize.R</code> file. For example, you can see how “rna-seq” and “gene count” both link to the Negative Binomial marginal distribution.</p></li>
<li><p>Modify the user helping function <code><a href="reference/which_omics.html">which_omics()</a></code> in the <code>R/helpers.R</code> file accordingly, adding your new omics type, the accepted synonyms, and the default marginal distribution you decided to assign to it. Please, respect the syntax of the message (indentation, order of words, etc.) to mirror the behaviour of the omics types that are already explained there.</p></li>
</ul></div>
<div class="section level4">
<h4 id="new-marginal-distribution-no-new-omics-type">New marginal distribution, no new omics type<a class="anchor" aria-label="anchor" href="#new-marginal-distribution-no-new-omics-type"></a></h4>
<p>If you want to expand the library of marginal distributions of the package, say you want to add the <strong>F</strong>oo <strong>B</strong>ar marginal distribution:</p>
<ul><li>Create the function <strong>fb</strong><code>_m_copulizer()</code> (notice the initials of the distribution) in the <code>R/copulize.R</code> file. The function should estimate the parameters of the marginal distribution from the layer it is given as an input, using the best estimation strategy to your knowledge.
<ul><li>If possible, it should include support for a model design matrix and design formula to include covariates in the estimation of such parameters. (<em>Not yet implemented as of version 0.99.0</em>)</li>
<li>It should also include strategies to perform inversion of non invertible distributions. Implementing at least the median method is mandatory.</li>
<li>Make sure to respect all the dimensionalities expected by the functions you will use internally to the new function you are implementing. A good way to check for it is to make sure that every variable in the layer you obtain as an output is approximately distributed according to a standard normal distribution.</li>
<li>Make sure to appropriately deal with occasional infinite values with the function <code>hackInf()</code>.</li>
<li>Follow the already existing functions as examples. The <code>nb_m_copulizer()</code> function as an example of a non-invertible marginal, and the <code>ln_m_copulizer()</code> as an example of an invertible one.</li>
</ul></li>
<li>Add an <code>else if</code> statement to the function <code><a href="reference/copulize.html">copulize()</a></code> in the file <code>R/copulize.R</code>, where indicated, inside the for loop where each layer is copulized, where your <code>fb_m_copulizer()</code> function will be used. <em>Follow the same syntax already in use for the other marginals</em>, and everything should work fine. In particular, make sure to include both the initials and the full marginal distribution name as in the provided examples. In this case, it would be with <code>"fb</code>” and <code>"foo bar"</code>, as follows:
<ul><li><code>else if (tolower(marginals[l] %in% c("fb", "foo bar")) { ... }</code></li>
<li>Make sure to overwrite the <code>marginals[l]</code> element with the <code>"foo bar"</code> full name.</li>
</ul></li>
<li>Modify the <code><a href="reference/which_marginals.html">which_marginals()</a></code> function in the <code>R/helpers.R</code> file to include in the message information about your now marginal, following the same syntax and indentation of the ones that are present already.</li>
</ul></div>
<div class="section level4">
<h4 id="new-omics-type-new-marginal-distribution">New omics type, new marginal distribution<a class="anchor" aria-label="anchor" href="#new-omics-type-new-marginal-distribution"></a></h4>
<p>If you are adding a new omics type which follows a marginal distribution that is not implemented yet in the <code>carmon</code> package, please follow all the steps above apart from the very first step described, the one modifying the <code>omics2marginals()</code> in the <code>R/copulize.R</code> file. Instead, modify it as follows:</p>
<ul><li>To allow the new marginal distribution to be used as a default for the new omics type, modify the <code>omics2marginals()</code> function by adding an <code>else if</code> statement <strong>above</strong> the final else statement that assigns the empirical marginal distribution. Also in this case, include the omics type and a series of synonyms you believe appropriate, and assign the new marginal distribution to <code>marginals[l]</code> object with <code>marginals[l] &lt;- "fb"</code>. Again, <em>following the same syntax already available should allow this change to be</em><br><em>accomplished seamlessly</em>.</li>
</ul></div>
</div>
<div class="section level3">
<h3 id="pull-request-process">Pull request process<a class="anchor" aria-label="anchor" href="#pull-request-process"></a></h3>
<ul><li><p>Fork the package and clone onto your computer. If you haven’t done this before, we recommend using <code>usethis::create_from_github("DrQuestion/carmon", fork = TRUE)</code>.</p></li>
<li><p>Install all development dependencies with <code><a href="https://devtools.r-lib.org/reference/install_deps.html" class="external-link">devtools::install_dev_deps()</a></code>, and then make sure the package passes R CMD check by running <code><a href="https://devtools.r-lib.org/reference/check.html" class="external-link">devtools::check()</a></code>. If R CMD check doesn’t pass cleanly, it’s a good idea to ask for help before continuing.</p></li>
<li><p>Create a Git branch for your pull request (PR). We recommend using <code>usethis::pr_init("brief-description-of-change")</code>.</p></li>
<li><p>Make your changes, commit to git, and then create a PR by running <code><a href="https://usethis.r-lib.org/reference/pull-requests.html" class="external-link">usethis::pr_push()</a></code>, and following the prompts in your browser. The title of your PR should briefly describe the change. The body of your PR should contain <code>Fixes #issue-number</code>.</p></li>
<li><p>For user-facing changes, add a bullet to the top of <code>NEWS.md</code> (i.e. just below the first header). Follow the style described in <a href="https://style.tidyverse.org/news.html" class="external-link uri">https://style.tidyverse.org/news.html</a>.</p></li>
</ul></div>
<div class="section level3">
<h3 id="code-style">Code style<a class="anchor" aria-label="anchor" href="#code-style"></a></h3>
<ul><li><p>New code should follow the tidyverse <a href="https://style.tidyverse.org" class="external-link">style guide</a>. You can use <a href="https://posit-dev.github.io/air/" class="external-link">Air</a> to apply this style, but please don’t restyle code that has nothing to do with your PR.</p></li>
<li><p>We use <a href="https://cran.r-project.org/package=roxygen2" class="external-link">roxygen2</a>, with <a href="https://cran.r-project.org/web/packages/roxygen2/vignettes/rd-formatting.html" class="external-link">Markdown syntax</a>, for documentation.</p></li>
<li><p>We use <a href="https://cran.r-project.org/package=testthat" class="external-link">testthat</a> for unit tests. Contributions with test cases included are easier to accept.</p></li>
</ul></div>
</div>
<div class="section level2">
<h2 id="code-of-conduct">Code of Conduct<a class="anchor" aria-label="anchor" href="#code-of-conduct"></a></h2>
<p>Please note that the carmon project is released with a <a href="CODE_OF_CONDUCT.html">Contributor Code of Conduct</a>. By contributing to this project you agree to abide by its terms.</p>
</div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>

</div>



      <footer><div class="copyright">
  <p></p><p>Developed by Alessio Albanese, Pariya Behrouzi.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer></div>






  </body></html>

